# Nguyá»…n NhÆ° KhiÃªm - K225480106030
# BÃ i táº­p 6: Há»‡ quáº£n trá»‹ CSDL
# Chá»§ Ä‘á»: CÃ¢u lá»‡nh Select
# YÃªu cáº§u bÃ i táº­p: 
## Cho file sv_tnut.sql (1.6MB)
1. HÃ£y nÃªu cÃ¡c bÆ°á»›c Ä‘á»ƒ import Ä‘Æ°á»£c dá»¯ liá»‡u trong sv_tnut.sql vÃ o sql server cá»§a em
2. dá»¯ liá»‡u Ä‘áº§u vÃ o lÃ  tÃªn cá»§a sv; sÄ‘t; ngÃ y, thÃ¡ng, nÄƒm sinh cá»§a sinh viÃªn (cá»§a sv Ä‘ang lÃ m bÃ i táº­p nÃ y)
3. nháº­p sql Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng hoÃ n toÃ n ngÃ y/thÃ¡ng/nÄƒm vá»›i em?
4. nháº­p sql Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng ngÃ y vÃ  thÃ¡ng sinh vá»›i em?
5. nháº­p sql Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng thÃ¡ng vÃ  nÄƒm sinh vá»›i em?
6. nháº­p sql Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng tÃªn vá»›i em?
7. nháº­p sql Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng há» vÃ  tÃªn Ä‘á»‡m vá»›i em.
8. nháº­p sql Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o cÃ³ sÄ‘t sai khÃ¡c chá»‰ 1 sá»‘ so vá»›i sÄ‘t cá»§a em.
9. Báº¢NG SV CÃ“ HÆ N 9000 ROWS, HÃƒY LIá»†T KÃŠ Táº¤T Cáº¢ CÃC SV NGÃ€NH KMT, Sáº®P Xáº¾P THEO TÃŠN VÃ€ Há»Œ Äá»†M, KIá»‚U TIáº¾NG  VIá»†T, GIáº¢I THÃCH.
10. HÃƒY NHáº¬P SQL Äá»‚ LIá»†T KÃŠ CÃC SV Ná»® NGÃ€NH KMT CÃ“ TRONG Báº¢NG SV (TRÃŒNH BÃ€Y QUÃ TRÃŒNH SUY NGHÄ¨ VÃ€ GIáº¢I NHá»®NG Vá»¨NG Máº®C)

## DEADLINE: 23H59:59 NGÃ€Y 25/4/2025
## *Ghi chÃº: Giáº£i thÃ­ch táº¡i sao láº¡i cÃ³ SQL nhÆ° váº­y.*

# BÃ i lÃ m :
## 1. CÃ¡c bÆ°á»›c Ä‘á»ƒ import Ä‘Æ°á»£c dá»¯ liá»‡u trong sv_tnut.sql vÃ o sql server 
### BÆ°á»›c 1: Táº¡o Database sv_tnut

![Screenshot 2025-04-24 224454](https://github.com/user-attachments/assets/7143338f-cca5-4237-9413-62944efc5e7f)

### BÆ°á»›c 2: Báº¥m Ctrl O Ä‘á»ƒ má»Ÿ file

![Screenshot 2025-04-24 225144](https://github.com/user-attachments/assets/fece2a4d-2520-4b48-90a5-6bbd7b1496f7)

### BÆ°á»›c 3: Cháº¡y file

![Screenshot 2025-04-24 224454](https://github.com/user-attachments/assets/30c6b91a-ae1a-4317-85b0-6660cd657608)

#### ThÃªm thÃ nh cÃ´ng
![Screenshot 2025-04-24 224842](https://github.com/user-attachments/assets/fc8d6736-1eb6-4912-9cda-425cf06523ea)

### BÆ°á»›c 4: Kiá»ƒm tra xem Ä‘Ã£ cÃ³ Ä‘á»§ dá»¯ liá»‡u hay chÆ°a

![Screenshot 2025-04-24 230012](https://github.com/user-attachments/assets/ba4a8758-7b0b-4e6f-be5d-7a34915ec28f)

- Sáº½ hiá»‡n báº£ng nhÆ° nÃ y nhÆ°ng chá»‰ hiá»‡n giá»›i háº¡n 200 Rows

![Screenshot 2025-04-24 230411](https://github.com/user-attachments/assets/e7240ec3-e9e3-4874-a6ac-8b20be85701d)

- Táº¡o new query má»›i Ä‘á»ƒ kiá»ƒm tra xem Ä‘Ã£ thÃªm Ä‘á»§ hay chÆ°a

![Screenshot 2025-04-24 225808](https://github.com/user-attachments/assets/52f758d2-6530-4048-a4d0-ea0bcc027251)

### NhÆ° váº­y lÃ  Ä‘Ã£ import Ä‘Æ°á»£c dá»¯ liá»‡u trong sv_tnut.sql vÃ o sql server thÃ nh cÃ´ng

## 2. Dá»¯ liá»‡u Ä‘áº§u vÃ o lÃ  tÃªn cá»§a sv; sÄ‘t; ngÃ y, thÃ¡ng, nÄƒm sinh cá»§a sinh viÃªn :
- TÃªn : KhiÃªm
- Há» Ä‘á»‡m : Nguyá»…n NhÆ°
- Sá»‘ Ä‘iá»‡n thoáº¡i : 0968694065
- NgÃ y/ThÃ¡ng/NÄƒm sinh : 31/05/2004
## 3. SQL Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng hoÃ n toÃ n ngÃ y/thÃ¡ng/nÄƒm 
```sql
SELECT * 
FROM SV 
WHERE ns = '2004-05-31';
```
### ğŸ§  Giáº£i thÃ­ch: 
- ns lÃ  ngÃ y sinh (kiá»ƒu date).
- Muá»‘n tÃ¬m sinh viÃªn trÃ¹ng sinh nháº­t vá»›i mÃ¬nh cáº£ ngÃ y/thÃ¡ng/nÄƒm thÃ¬ so sÃ¡nh trá»±c tiáº¿p lÃ  Ä‘á»§.
- CÃ¢u nÃ y lá»c ra nhá»¯ng dÃ²ng cÃ³ ngÃ y sinh Ä‘Ãºng báº±ng 2004-05-31, nghÄ©a lÃ  trÃ¹ng hoÃ n toÃ n ngÃ y/thÃ¡ng/nÄƒm sinh vá»›i báº¡n.

### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/c2c9e28a-4ab3-40c4-a274-7ac1f6611589)

## 4. SQL Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng ngÃ y vÃ  thÃ¡ng sinh 
```sql
SELECT *
FROM SV
WHERE DAY(ns) = 31 AND MONTH(ns) = 5;
```
### ğŸ§  Giáº£i thÃ­ch:
- Chá»‰ quan tÃ¢m Ä‘áº¿n ngÃ y vÃ  thÃ¡ng, khÃ´ng care nÄƒm.
- DÃ¹ng hÃ m DAY() vÃ  MONTH() Ä‘á»ƒ tÃ¡ch ra so sÃ¡nh.
- DAY(ns) láº¥y ra ngÃ y trong thÃ¡ng tá»« cá»™t ns.
- MONTH(ns) láº¥y ra thÃ¡ng tá»« ns.
- Lá»c ra cÃ¡c sinh viÃªn sinh ngÃ y 31 thÃ¡ng 5.
  
### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/15941f22-d424-411e-bf9d-ab58bfc6c140)

## 5. SQL Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng thÃ¡ng vÃ  nÄƒm sinh 
```sql
SELECT *
FROM SV
WHERE MONTH(ns) = 5 AND YEAR(ns) = 2004;
```
### ğŸ§  Giáº£i thÃ­ch:
- TÆ°Æ¡ng tá»± trÃªn, giá» thÃ¬ cáº§n MONTH() vÃ  YEAR() Ä‘á»ƒ lá»c ra sinh viÃªn sinh cÃ¹ng thÃ¡ng vÃ  nÄƒm vá»›i báº¡n.
- Lá»c cÃ¡c sinh viÃªn sinh vÃ o thÃ¡ng 5 nÄƒm 2004, khÃ´ng cáº§n Ä‘Ãºng ngÃ y.

### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/65c29838-9d5c-4c4d-be95-fb77d8c1a4b0)

## 6. SQL Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng tÃªn 
```sql
SELECT *
FROM SV
WHERE ten = N'KhiÃªm';
```
### ğŸ§  Giáº£i thÃ­ch:
- So sÃ¡nh cá»™t ten vá»›i tÃªn cá»§a báº¡n.
- Lá»c ra cÃ¡c sinh viÃªn cÃ³ tÃªn lÃ  KhiÃªm.
- DÃ¹ng N'' vÃ¬ lÃ  chuá»—i Unicode (cÃ³ dáº¥u tiáº¿ng Viá»‡t).

### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/e58175c6-2aba-4057-9d71-983c8bb4bff0)

## 7. SQL Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o trÃ¹ng há» vÃ  tÃªn Ä‘á»‡m 
```sql
SELECT *
FROM SV
WHERE hodem = N'Nguyá»…n NhÆ°';
```
### ğŸ§  Giáº£i thÃ­ch:
- TÆ°Æ¡ng tá»± nhÆ° trÃªn nhÆ°ng giá» lÃ  cá»™t hodem
- hodem lÃ  há» vÃ  tÃªn Ä‘á»‡m.
- Lá»c ra cÃ¡c sinh viÃªn cÃ³ hodem giá»‘ng báº¡n (Nguyá»…n NhÆ°).
- DÃ¹ng N'' vÃ¬ lÃ  chuá»—i Unicode (cÃ³ dáº¥u tiáº¿ng Viá»‡t).

### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/9bf9880e-057f-4b97-8178-eb20695e4463)

## 8. SQL Ä‘á»ƒ tÃ¬m xem cÃ³ nhá»¯ng sv nÃ o cÃ³ sÄ‘t sai khÃ¡c chá»‰ 1 sá»‘ dt 
```sql
SELECT *
FROM SV
WHERE 
    LEN(sdt) = LEN('968694065') AND
    (
        SELECT COUNT(*)
        FROM (
            SELECT number 
            FROM master.dbo.spt_values 
            WHERE type = 'P' AND number BETWEEN 1 AND LEN('968694065')
        ) AS x
        WHERE SUBSTRING(SV.sdt, x.number, 1) <> SUBSTRING('968694065', x.number, 1)
    ) = 1;
```
### ğŸ“Œ Giáº£i thÃ­ch:
- LEN(sdt) Ä‘áº£m báº£o chiá»u dÃ i sá»‘ Ä‘iá»‡n thoáº¡i giá»‘ng nhau.
- master.dbo.spt_values lÃ  báº£ng há»‡ thá»‘ng chá»©a nhiá»u sá»‘ liÃªn tiáº¿p (dÃ¹ng Ä‘á»ƒ láº·p tá»« 1 Ä‘áº¿n Ä‘á»™ dÃ i cá»§a sá»‘ Ä‘iá»‡n thoáº¡i).
- So sÃ¡nh tá»«ng kÃ½ tá»± má»™t giá»¯a SV.sdt vÃ  '968694065', Ä‘áº¿m sá»‘ kÃ½ tá»± khÃ¡c nhau.
- Chá»‰ láº¥y nhá»¯ng dÃ²ng cÃ³ Ä‘Ãºng 1 kÃ½ tá»± khÃ¡c.
### Káº¿t quáº£ : 

## 9. LIá»†T KÃŠ Táº¤T Cáº¢ CÃC SV NGÃ€NH KMT, Sáº®P Xáº¾P THEO TÃŠN VÃ€ Há»Œ Äá»†M, KIá»‚U TIáº¾NG  VIá»†T
```sql
SELECT *
FROM SV
WHERE lop LIKE N'%KMT%' OR lop LIKE N'%KTP%'
ORDER BY ten COLLATE Vietnamese_CI_AS, hodem COLLATE Vietnamese_CI_AS;
```
### ğŸ§  Giáº£i thÃ­ch:
- Lá»c theo lá»›p cÃ³ chá»¯ KMT hoáº·c KTP (2 ngÃ nh cÃ¹ng chuyÃªn ngÃ nh).
- COLLATE Vietnamese_CI_AS: Sáº¯p xáº¿p theo chuáº©n báº£ng chá»¯ cÃ¡i tiáº¿ng Viá»‡t, khÃ´ng lá»‡ch dáº¥u hay sai thá»© tá»± Äƒ, Ã¢, Ä‘....

### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/91647ae7-0dba-41a9-93a4-079386301dd1)

## 10. SQL LIá»†T KÃŠ CÃC SV Ná»® NGÃ€NH KMT CÃ“ TRONG Báº¢NG SV 
```sql
SELECT * 
FROM SV
WHERE (TRIM(lop) LIKE '%KMT%' OR TRIM(lop) LIKE '%KTP%')
  AND (
        TRIM(hodem) LIKE N'%Thá»‹%' 
        OR ten IN (N'Lan', N'Háº±ng', N'Huá»‡', N'BÃ­ch', N'Mai', N'HÆ°Æ¡ng', N'Linh', N'Tháº£o', N'Trang', N'Hiá»n', N'Giang', N'Ngá»c', N'Yáº¿n')
      )
  AND NOT (
		   (TRIM(hodem) LIKE N'%VÄƒn%' AND ten = N'Ngá»c') 
        OR (TRIM(hodem) LIKE N'%Kháº¯c%' AND ten = N'Linh')
	    OR (TRIM(hodem) LIKE N'%Duy%' AND ten = N'Linh')
		OR (TRIM(hodem) LIKE N'%Pháº¡m Äan%' AND ten = N'Linh')
  );
```
### ğŸ§  Giáº£i thÃ­ch:
- lop LIKE '%KMT%' hoáº·c '%KTP%': Lá»c Ä‘Ãºng ngÃ nh. LIKE : chá»‰ cáº§n cÃ³ KÃ½ tá»± giá»‘ng ko cáº§n giá»‘ng háº¿t.
- hodem LIKE '%Thá»‹%' lÃ  gá»£i Ã½ máº¡nh Ä‘á»ƒ nháº­n diá»‡n ná»¯. ÄoÃ¡n giá»›i tÃ­nh ná»¯ qua há» Ä‘á»‡m Thá»‹ hoáº·c tÃªn phá»• biáº¿n cá»§a ná»¯.
- Bá»• sung danh sÃ¡ch cÃ¡c tÃªn phá»• biáº¿n cá»§a ná»¯ (Lan, Mai, Yáº¿n...) vÃ¬ cÃ³ ngÆ°á»i khÃ´ng cÃ³ chá»¯ "Thá»‹".
- Loáº¡i trá»« má»™t sá»‘ TH Ä‘áº·c biá»‡t nhÆ° "VÄƒn Ngá»c", "Kháº¯c Linh", "Duy Linh", "Pháº¡m Äan Linh" vÃ¬ kháº£ nÄƒng cao lÃ  nam (tÃªn unisex, nhÆ°ng Ä‘á»‡m chá»‰ nam) tÃªn nghe nhÆ° ná»¯ nhÆ°ng thá»±c ra lÃ  nam.
- DÃ¹ng TRIM() Ä‘á»ƒ trÃ¡nh lá»—i khoáº£ng tráº¯ng trong dá»¯ liá»‡u.
#### âœ… Ã tÆ°á»Ÿng: vÃ¬ khÃ´ng cÃ³ cá»™t gioitinh, nÃªn báº¡n dÃ¹ng logic phá»ng Ä‘oÃ¡n tÃªn giá»›i tÃ­nh Ä‘á»ƒ lá»c sinh viÃªn ná»¯.
### Káº¿t quáº£ : 

![image](https://github.com/user-attachments/assets/ee05d7f2-c084-4f5a-9f0e-4937d086bce1)

# The End
